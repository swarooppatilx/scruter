<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Bootstrap CSS -->
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet">
  <!-- Font Awesome CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  
  <!-- Bootstrap JS, Popper.js, and jQuery -->
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.0/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.0/ScrollTrigger.min.js"></script>
  <script src="js/gsap.js"></script>

  <!-- Add service worker -->
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('js/sw.js')
        .then((registration) => {
          console.log('Service Worker registered with scope:', registration.scope);
        })
        .catch((error) => {
          console.error('Service Worker registration failed:', error);
        });
    }
  </script>
  <%- include('partials/head') %>
  
  <style>
    /* Custom scrollbar for WebKit browsers (Chrome, Safari, Edge) */

    .icon-circle {
      display: flex;
      justify-content: center;
      align-items: center;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background-color: #ffffff;
      transition: background-color 0.3s, box-shadow 0.3s;
    }

    .icon-circle:hover {
      background-color: #eeeeee;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }

    .icon-circle i {
      color: #333;
      font-size: 24px;
    }

    /* Scroll Progress Bar */
    #progress-bar {
      position: fixed;
      top: 0;
      left: 0;
      height: 6px;
      background-color: #2e8030;
      width: 0%;
      z-index: 9999;
    }

    /* Scroll Back Button */
    .scroll-back-button {
      position: fixed;
      bottom: 30px;
      right: 30px;
      width: 50px;
      height: 50px;
      background: linear-gradient(135deg, #ff7e5f, #feb47b); /* Orange gradient */
      border-radius: 50%;
      display: flex;
      justify-content: center;
      align-items: center;
      text-decoration: none;
      color: white;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
      transition: transform 0.3s ease;
      z-index: 9999;
    }

    .scroll-back-button:hover {
      transform: scale(1.1);
    }

    .scroll-back-button i {
      font-size: 24px;
    }

    /* Information Section */
    .card-hover {
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .card-hover:hover {
      transform: translateY(-10px);
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
    }

    .repo-link {
      color: #007bff; /* Bootstrap primary color */
      font-weight: bold;
      text-decoration: none; /* Remove underline */
      padding: 5px 10px; /* Add some padding */
      border: 2px solid #007bff; /* Add border */
      border-radius: 5px; /* Rounded corners */
      transition: background-color 0.3s, color 0.3s; /* Smooth transition */
    }

    .repo-link:hover {
      background-color: #007bff; /* Change background on hover */
      text-decoration: none;
      color: white; /* Change text color on hover */
    }

.carousel-control-prev,
.carousel-control-next {
    width: 50px;
    height: 50px;
    top: 50%; /* Center vertically */
    transform: translateY(-50%); /* Center vertically */
    opacity: 0.8; /* Add slight transparency for aesthetic effect */
}

/* Move the previous button slightly to the right */
.carousel-control-prev {
    left: 20px;
}

/* Move the next button slightly to the left */
.carousel-control-next {
    right: 20px;
}

.carousel-control-prev-icon,
.carousel-control-next-icon {
    background-color: rgba(0, 0, 0, 0.5); /* Semi-transparent background for better visibility */
    border-radius: 50%;
    padding: 30px;
    font-size: 16px;
}

.carousel-control-prev-icon:hover,
.carousel-control-next-icon:hover {
    background-color: rgba(0, 0, 0, 0.7);
}

/* Card hover effect */
.card-hover:hover {
    transform: translateY(-10px);
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
}

/* Scroll button styles */
.scroll-button {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background-color: #007bff;
    color: white;
    border: none;
    border-radius: 5px;
    padding: 10px 15px;
    cursor: pointer;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    display: none; /* Initially hidden */
}

.scroll-button.show-btn {
    display: block; /* Show when class added */
}

.scroll-button:hover {
    background-color: #0056b3; /* Darker shade on hover */
}

</head>

<body>
  <button class="scroll-button">Back to Top</button>
  <div id="progress-bar"></div>
  <%- include('partials/navbar') %>

  <!-- Carousel Section -->
  <header>
    <div id="headerCarousel" class="carousel slide" data-ride="carousel">
      <ol class="carousel-indicators">
        <li data-target="#headerCarousel" data-slide-to="0" class="active"></li>
        <li data-target="#headerCarousel" data-slide-to="1"></li>
        <li data-target="#headerCarousel" data-slide-to="2"></li>
      </ol>
      <div class="carousel-inner">
        <div class="carousel-item active">
          <img class="d-block w-100" src="/background.jpg" alt="First slide">
          <div class="carousel-caption d-none d-md-block"></div>
        </div>
        <div class="carousel-item">
          <img class="d-block w-100" src="/2.png" alt="Second slide">
          <div class="carousel-caption d-none d-md-block"></div>
        </div>
        <div class="carousel-item">
          <img class="d-block w-100" src="/3.png" alt="Third slide">
          <div class="carousel-caption d-none d-md-block"></div>
        </div>
      </div>
      <a class="carousel-control-prev" href="#headerCarousel" role="button" data-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
      </a>
      <a class="carousel-control-next" href="#headerCarousel" role="button" data-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
      </a>
    </div>
  </header>

  <!-- Search Bar -->
  <%- include('partials/searchbar') %>

  <!-- Mission Section -->
  <section class="mission-section text-center">
    <div class="container">
      <h2 class="mb-4">Welcome to Scruter</h2>
      <p class="lead">Your go-to platform for buying, selling, and finding everything you need locally.</p>
      <p>Connecting communities and making local commerce easy and accessible for everyone.</p>
      <% if(!user) { %>
        <a href="/auth" class="btn btn-lg cta-button btn-outline-success mx-2">Join Now</a>
      <% } %>
      <a href="/team" class="btn btn-lg cta-button btn-outline-success">Our Team</a>
    </div>
  </section>

  <!-- Information Section -->
  <section class="container mt-5 mb-5 pb-5">
    <div class="row">
      <div class="col-md-4 d-flex justify-content-center">
        <div class="card text-center shadow h-100 card-hover">
          <div class="card-body d-flex flex-column justify-content-center">
            <h3 class="card-title">What is Scruter?</h3>
            <p class="card-text">Scruter is a local classifieds and community site designed to bring people together for buying, selling, and exchanging goods and services. With an easy-to-use interface, Scruter connects you with people in your local community, whether you're looking for a specific product, service, or simply to connect with like-minded individuals.</p>
          </div>
        </div>
      </div>
      <div class="col-md-4 d-flex justify-content-center">
        <div class="card text-center shadow h-100 card-hover">
          <div class="card-body d-flex flex-column justify-content-center">
            <h3 class="card-title">How It Works</h3>
            <p class="card-text">Post ads, browse listings, and connect with sellers and buyers in your area. Scruter makes local commerce easy and accessible, ensuring that you can find what you need without the hassle of shipping or long-distance transactions.</p>
          </div>
        </div>
      </div>
      <div class="col-md-4 d-flex justify-content-center">
        <div class="card text-center shadow h-100 card-hover">
          <div class="card-body d-flex flex-column justify-content-center">
            <h3 class="card-title">Join Our Community</h3>
            <p class="card-text">Become part of our vibrant community today! Sign up to start buying, selling, and connecting with others in your area.</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Feedback Section -->
  <section class="feedback-section text-center">
    <div class="container">
      <h2 class="mb-4">Feedback</h2>
      <form id="feedbackForm" class="form-inline justify-content-center">
        <input type="text" class="form-control mb-2 mr-sm-2" id="feedbackName" placeholder="Your Name" required>
        <input type="email" class="form-control mb-2 mr-sm-2" id="feedbackEmail" placeholder="Your Email" required>
        <textarea class="form-control mb-2 mr-sm-2" id="feedbackMessage" rows="1" placeholder="Your Feedback" required></textarea>
        <button type="submit" class="btn btn-primary mb-2">Submit</button>
      </form>
    </div>
  </section>

  <!-- Scroll Back Button -->
  <a href="#" id="scrollBackButton" class="scroll-back-button">
    <i class="fas fa-arrow-up"></i>
  </a>

  <%- include('partials/footer') %>
  <%- include('partials/bottom_nav') %>

<!-- Scroll Progress Script -->
<script>
  window.onscroll = function () {
    // Scroll progress bar
    var winScroll = document.body.scrollTop || document.documentElement.scrollTop;
    var height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
    var scrolled = (winScroll / height) * 100;
    document.getElementById("progress-bar").style.width = scrolled + "%";

    // Back to top button visibility
    const scrollButton = document.querySelector(".scroll-button");
    if (winScroll > 100) {
      scrollButton.classList.add("show-btn");
    } else {
      scrollButton.classList.remove("show-btn");
    }
  };

  function smoothScrollToTop() {
    const scrollY = window.pageYOffset;
    const scrollStep = Math.max(10, Math.floor(scrollY / 20));
    if (scrollY > 0) {
      window.scrollBy(0, -scrollStep);
      requestAnimationFrame(smoothScrollToTop);
    }
  }

  // When the button is clicked, scroll to the top smoothly
  document.querySelector(".scroll-button")?.addEventListener("click", () => {
    requestAnimationFrame(smoothScrollToTop);
  });
</script>


  <script>
    // Scroll back to the top when the button is clicked
    document.getElementById("scrollBackButton").onclick = function () {
      window.scrollTo({
        top: 0,
        behavior: "smooth"
      });
    };
  </script>

</body>

</html>
